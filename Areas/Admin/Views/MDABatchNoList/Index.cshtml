@model ResponseModel<MDA_Status>

@{
    ViewData["Title"] = "MDA Batch No List View";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var Url_RootToController = Url.Content("~/") + ViewContext.RouteData.Values["area"].ToString() + "/" + ViewContext.RouteData.Values["Controller"].ToString();
}


<div class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1 class="m-0">MDA Batch No List Report</h1>
            </div>

        </div>
    </div>
</div>
<section class="content">
    <div class="container-fluid">
        <div class="card card-primary card-outline">

            <div class="card-body">

                <div class="panel-divider">
                    <span>Search</span>
                    <div class="row no-gutters p-0 m-0">
                        <div class="col-12 row no-gutters">
                           @* <div class="form-group col-md-3 mx-3">
                                <label class="col-form-label" style="align-content:start">Plant</label>
                                <input type="hidden" class="form-control form-control-sm" id="PlantId" value="@Model.Obj.PlantId">
                                <input type="text" class="form-control form-control-sm" id="PlantName" value="@Model.Obj.PlantName" autocomplete="off" readonly>
                            </div>*@
                            <div class="form-group col-md-3 mx-3">
                                <label class="col-form-label" style="align-content:start">MDA No</label>
                                <input type="text" class="form-control form-control-sm" id="MDA_No" utocomplete="off">
                            </div>
                        </div>

                        <div class="col-12 no-gutters my-3">
                            <div class="form-group mx-3 text-center">
                                <label class="col-form-label text-right" style="align-content:start">&nbsp;</label>

                                <button type="button" class="btn btn-info btn-md pull-right mr-2" onclick="fnLoadTableData()"> Search </button>
                                <button type="button" class="btn btn-danger btn-md pull-right mr-2" onclick="fnClear()"> Clear </button>
                            </div>
                        </div>
                    </div>
                    <div class="clearfix"></div>
                </div>

                <div class="panel-divider">
                    <span>Details</span>
                    <div class="row no-gooters">
                        <div class="col-md-12 my-1">
                            <table class="table table-bordered table-striped table-hover" id="dataTable_PoDetails"></table>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



@section Scripts{

    <script type="text/javascript">

        function fnClear() {
            $('#MDA_No').val("");
        }

        $(function () { });

        function fnLoadTableData() {
            if ($.fn.DataTable.isDataTable('#dataTable_PoDetails')) {
                $('#dataTable_PoDetails').DataTable().destroy();
            }

            dataTableMain = $("#dataTable_PoDetails")
                .DataTable({
                    "destroy": true,
                    "pageLength": "All","lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
                    "sAjaxSource": "@Url_RootToController/GetData_MDABatchNoList",
                    "bServerSide": true,
                    "bProcessing": true,
                    "bSearchable": true,
                    "scrollX": true,
                    "order": [[0, 'asc']],
                    "language": { "emptyTable": "No record found.", "processing": '<i class="fa fa-spinner fa-spin fa-3x fa-fw" style="color:#2a2b2b;"></i><span class="sr-only">Loading...</span> ' },
                    "fnServerParams": function (aoData) {
                        aoData.push({ "name": "MdaNo", "value": "" + $('#MDA_No').val() });
                        aoData.push({ "name": "Type", "value": "" });
                    },
                    "columns": [
                        { "title": "SR. No.", "data": "srNo", "autoWidth": true, "searchable": true },
                        { "title": "Shipper QR Code", "data": "qrCode", "autoWidth": true, "searchable": true },
                        { "title": "Batch No", "data": "batchno", "autoWidth": true, "searchable": true },
                    ],
                    "dom": "<'row'<'col-sm-6 mb-3'B>>" +
                        "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>>" +
                        "<'row'<'col-sm-12'tr>>" +
                        "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
                    "buttons": [
                    //     {
                    //     extend: "csv",
                    //     className: "btn-flat btn-info mx-2 px-3",
                    //     titleAttr: 'Export in CSV',
                    //     text: 'CSV',
                    //     filename: 'MDA Status List',
                    //     init: function (api, node, config) { $(node).removeClass('btn-default') }
                    // },
                    // {
                    //     extend: "excel",
                    //     className: "btn-flat btn-success mx-2 px-3",
                    //     titleAttr: 'Export in Excel',
                    //     text: 'Excel',
                    //     filename: 'MDA Status List',
                    //     init: function (api, node, config) { $(node).removeClass('btn-default') }
                    // },
                    {
                        extend: "pdfHtml5",
                        className: "btn-flat btn-danger mx-2 px-3",
                        titleAttr: 'Export in PDF',
                        text: 'PDF',
                        pageSize: 'LEGAL',
                        filename: 'MDA Status Report',
                        exportOptions: {
                            modifier: {
                                page: 'all' // Export all pages
                            }
                        },
                        init: function (api, node, config) { $(node).removeClass('btn-default') },
                        customize: function (doc) {
                            doc.defaultStyle.fontSize = 9;
                            doc.pageMargins = [5, 10, 5, 10]; // Adjust margins
                            doc.pageOrientation = 'landscape'; // Set orientation
                            //doc.content[0].table.widths = ['*', '*', '*', '*', '*' ];
                            // Add more customization options as needed
                        }
                    }]
                });

        }
    </script>
}

