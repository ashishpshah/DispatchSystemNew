@using System.Text.RegularExpressions
@model ResponseModel<LoginViewModel>

@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/docs/4.0/assets/img/favicons/favicon.ico">
    @{
        var pageTitle = "";

        if (Model.Data1 == null || string.IsNullOrEmpty(Model.Data1.QrCode_Type) || Model.Data1.QrCode_Type == "B")
        {
            pageTitle = "Product Information / प्रोडक्ट जानकारी";
        }
        else if (Model.Data1 != null && Model.Data1.QrCode_Type == "S")
        {
            pageTitle = "Shipper Information / शिपर जानकारी";
        }
        else if (Model.Data3 != null)
        {
            pageTitle = "Invoice Information / चालान जानकारी";
        }
    }
    <title>@pageTitle</title>

    <link rel="stylesheet" href="~/plugins/fontawesome-free/css/all.min.css">

    <link rel="stylesheet" href="~/dist/css/adminlte.min.css">

    <style type="text/css">
        /* Sticky footer styles
                                                                                                                                                                                                                                                                                                                                        -------------------------------------------------- */
        html {
            position: relative;
            min-height: 100%;
        }

        body {
            margin-bottom: 60px; /* Margin bottom by footer height */
        }

        .footer {
            position: absolute;
            bottom: 0;
            width: 99%;
            height: 60px; /* Set the fixed height of the footer here */
            line-height: 60px; /* Vertically center the text there */
            background-color: transparent;
        }


        /* Custom page CSS
                                                                                                                                                                                                                                                                                                                                        -------------------------------------------------- */
        /* Not required for template or sticky footer method. */

        .container {
            width: auto;
            max-width: 960px;
            padding: 0 15px;
        }

        /*
                                                                                                                                                                                                                                                                                                                                                 * Custom translucent site header
                                                                                                                                                                                                                                                                                                                                                 */

        .site-header {
            background-color: rgba(0, 0, 0, .85);
            -webkit-backdrop-filter: saturate(180%) blur(20px);
            backdrop-filter: saturate(180%) blur(20px);
        }

            .site-header a {
                color: #999;
                transition: ease-in-out color .15s;
            }

                .site-header a:hover {
                    color: #fff;
                    text-decoration: none;
                }

        /*
                                                                                                                                                                                                                                                                                                                                                 * Dummy devices (replace them with your own or something else entirely!)
                                                                                                                                                                                                                                                                                                                                                 */

        .product-device {
            position: absolute;
            right: 10%;
            bottom: -30%;
            width: 300px;
            height: 540px;
            background-color: #333;
            border-radius: 21px;
            -webkit-transform: rotate(30deg);
            transform: rotate(30deg);
        }

            .product-device::before {
                position: absolute;
                top: 10%;
                right: 10px;
                bottom: 10%;
                left: 10px;
                content: "";
                background-color: rgba(255, 255, 255, .1);
                border-radius: 5px;
            }

        .product-device-2 {
            top: -25%;
            right: auto;
            bottom: 0;
            left: 5%;
            background-color: #e5e5e5;
        }


        /*
                                                                                                                                                                                                                                                                                                                                                 * Extra utilities
                                                                                                                                                                                                                                                                                                                                                 */

        .border-top {
            border-top: 1px solid #e5e5e5;
        }

        .border-bottom {
            border-bottom: 1px solid #e5e5e5;
        }

        .box-shadow {
            box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05);
        }

        .flex-equal > * {
            -ms-flex: 1;
            -webkit-box-flex: 1;
            flex: 1;
        }

        @@media (min-width: 768px) {
            .flex-md-equal > * {
                -ms-flex: 1;
                -webkit-box-flex: 1;
                flex: 1;
            }
        }

        .overflow-hidden {
            overflow: hidden;
        }

        .table-bordered td, .table-bordered th {
            border: 1px solid #9fc7a8 !important;
        }

        tbody tr.border_0 {
            border: 1px solid #dcf2db !important;
        }

            tbody tr.border_0:first-child td {
                border-top: 1px solid #9fc7a8 !important;
            }

            tbody tr.border_0:last-child td {
                border-bottom: 1px solid #9fc7a8 !important;
            }

        td.border_0 {
            border: 1px solid #dcf2db !important;
        }

        tr.border_0 td:first-child {
            border-left: 1px solid #9fc7a8 !important;
        }

        tr.border_0 td:last-child {
            border-right: 1px solid #9fc7a8 !important;
        }

        tr td:first-child {
            /* Your CSS properties here */
            width: 50%;
        }
    </style>
</head>

<body style="background-color:#dcf2db">
    <div class="position-relative overflow-hidden py-3 text-center">
        <div class="col-md-5 mx-auto">
            <img src="~/images/iffco-logo.png" class="img-fluid" alt="">
        </div>
    </div>

    <div class="d-md-flex flex-md-equal w-100 my-md-3">
        <div class="@((Model.Data1 != null && Model.Data1.QrCode_Type == "B") ? "col-sm-8 col-md-6" : "col-sm-10 col-md-8") mx-auto py-3 text-center text-white overflow-hidden" style="background-color:#1d8134">
            @if (Model.Data1 == null || string.IsNullOrEmpty(Model.Data1.QrCode_Type) || Model.Data1.QrCode_Type == "B")
            {
                <span class="text-center text-white"><h3>Product Information / प्रोडक्ट जानकारी</h3></span>
            }
            else if (Model.Data1 != null && Model.Data1.QrCode_Type == "S")
            {
                <span class="text-center text-white"><h3>Shipper Information / शिपर जानकारी</h3></span>
            }
            else if (Model.Data3 != null)
            {
                <span class="text-center text-white"><h3>Invoice Information / चालान जानकारी</h3></span>
            }
        </div>
    </div>

    <div class="d-md-flex flex-md-equal w-100 my-md-3">
        @if (Model.Data1 == null || string.IsNullOrEmpty(Model.Data1.QrCode_Type) || Model.Data1.QrCode_Type == "B")
        {
            <div class="col-sm-8 col-md-6 mx-auto py-3 text-center overflow-hidden">
                <div class="mx-auto table-responsive">
                    <table class="table table-bordered table-sm w-100">
                        <tbody>
                            <tr>
                                <td>Plant Name / इकाई</td>
                                <td>@Model.Data1.PlantName</td>
                            </tr>
                            <tr>
                                <td>Bottle QR Code / बोतल क्यू आर संहिता</td>
                                <td>@Model.Data1.QrCode</td>
                            </tr>
                            <tr>
                                <td>Batch No. / बैच क्रमांक</td>
                                <td>@Model.Data1.BatchDesc</td>
                            </tr>
                            <tr>
                                <td>Regn. No. / पंजीकरण क्रमांक</td>
                                <td>@Model.Data1.RegnNo</td>
                            </tr>
                            <tr>
                                <td>Mfg. Date / निर्माण तारीख</td>
                                <td>@Model.Data1.MfgDateTxt</td>
                            </tr>
                            <tr>
                                <td>Exp. Date / समाप्ति तारीख</td>
                                <td>@Model.Data1.ExpDateTxt</td>
                            </tr>
                            <tr>
                                <td>Manufactured By / द्वारा बनाया गया</td>
                                <td>@Model.Data1.MfgBy</td>
                            </tr>
                            <tr>
                                <td>Marketed By / विपणन किया गया</td>
                                <td>@Model.Data1.MarketedBy</td>
                            </tr>
                            <tr>
                                <td>Product Name / प्रोडक्ट का नाम</td>
                                <td>@Model.Data1.PrdDesc</td>
                            </tr>

                            <tr>
                                <td>Status / स्थिति</td>
                                <td>@Model.Data1.Status</td>
                            </tr>

                            @* @if (!string.IsNullOrEmpty(Model.Data1.MDA_No)) *@
                            @if (true)
                            {
                                <tr>
                                    <td>MDA No. / एमडीए क्रमांक</td>
                                    <td>@Model.Data1.MDA_No</td>
                                </tr>

                                <tr>
                                    <td>Dispatch Date / प्रेषण की तारीख</td>
                                    <td>@Model.Data1.DispatchDate</td>
                                </tr>

                                <tr>
                                    <td>Party Name / पार्टी का नाम</td>
                                    <td>@Model.Data1.PartyName</td>
                                </tr>

                                <tr>
                                    <td>Destination / स्थान</td>
                                    <td>@Model.Data1.Destination</td>
                                </tr>
                            }

                        </tbody>
                    </table>
                </div>
            </div>
        }

        @if (Model.Data1 != null && Model.Data1.QrCode_Type == "S")
        {
            <div class="col-sm-5 col-md-4 ml-auto py-3 text-center overflow-hidden">
                <div class="mx-auto table-responsive">
                    <table class="table table-bordered table-sm w-100">
                        <tbody>
                            <tr>
                                <td>Plant Name / इकाई</td>
                                <td>@Model.Data1.PlantName</td>
                            </tr>
                            <tr>
                                <td>Shipper QR Code / शिपर क्यू आर संहिता</td>
                                <td>@Model.Data1.QrCode</td>
                                @* @{
                            int count = 0;

                            string input = Model.Data1.QrCode.ToString();
                            string pattern = @"(\(\d+\))";

                            string result = Regex.Replace(input, pattern, m =>
                            {
                            if (++count == 2)
                            {
                            return " " + m.Value;
                            }
                            return m.Value;
                            });

                            }
                            <td>@(result)</td> *@
                            </tr>
                            <tr>
                                <td>Batch No. / बैच क्रमांक</td>
                                <td>@Model.Data1.BatchDesc</td>
                            </tr>

                            <tr>
                                <td>No of Bottle / बोतल की संख्या</td>
                                <td>@Model.Data1.No_Of_Bottle</td>
                            </tr>

                            <tr>
                                <td>Regn. No. / पंजीकरण क्रमांक</td>
                                <td>@Model.Data1.RegnNo</td>
                            </tr>
                            <tr>
                                <td>Mfg. Date / निर्माण तारीख</td>
                                <td>@Model.Data1.MfgDateTxt</td>
                            </tr>
                            <tr>
                                <td>Exp. Date / समाप्ति तारीख</td>
                                <td>@Model.Data1.ExpDateTxt</td>
                            </tr>
                            <tr>
                                <td>Manufactured By / द्वारा बनाया गया</td>
                                <td>@Model.Data1.MfgBy</td>
                            </tr>
                            <tr>
                                <td>Marketed By / विपणन किया गया</td>
                                <td>@Model.Data1.MarketedBy</td>
                            </tr>
                            <tr>
                                <td>Product Name / प्रोडक्ट का नाम</td>
                                <td>@Model.Data1.PrdDesc</td>
                            </tr>

                            <tr>
                                <td>Status / स्थिति</td>
                                <td>@Model.Data1.Status</td>
                            </tr>

                            @if (!string.IsNullOrEmpty(Model.Data1.MDA_No))
                            {
                                <tr>
                                    <td>MDA No. / एमडीए क्रमांक</td>
                                    <td>@Model.Data1.MDA_No</td>
                                </tr>

                                <tr>
                                    <td>Dispatch Date / प्रेषण की तारीख</td>
                                    <td>@Model.Data1.DispatchDate</td>
                                </tr>

                                <tr>
                                    <td>Party Name / पार्टी का नाम</td>
                                    <td>@Model.Data1.PartyName</td>
                                </tr>

                                <tr>
                                    <td>Destination / स्थान</td>
                                    <td>@Model.Data1.Destination</td>
                                </tr>
                            }

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-sm-5 col-md-4 mr-auto py-3 overflow-hidden">
                <div class="mx-auto table-responsive">
                    <table class="table table-bordered table-sm w-100">
                        <tbody>
                            @if (Model.Data1 != null && ((decimal)Model.Data1.No_Of_Bottle) > 0)
                            {
                                <tr class="text-center">
                                    <td colspan="4">Bottle QR Code / बोतल क्यू आर संहिता</td>
                                </tr>
                                @*<tr class="text-center pl-5">
                        <td colspan="4">
                        @if (!string.IsNullOrEmpty(Convert.ToString(Model.Data1.Bottle_QR_Codes)))
                        {
                        var list = Convert.ToString(Model.Data1.Bottle_QR_Codes).Split(',');

                        <ol>
                        @for (int i = 0; i < list.Length; i++)
                        {
                        <li>@(Convert.ToString(list[i]))</li>
                        }
                        </ol>
                        }
                        </td>
                        </tr> *@
                                var countRow = (!string.IsNullOrEmpty(Model.Data1.MDA_No)) ? 15 : 11;
                                var totalRow = 1;

                                @if (!string.IsNullOrEmpty(Convert.ToString(Model.Data1.Bottle_QR_Codes)))
                                {
                                    var cnt = 0;

                                    var list = Convert.ToString(Model.Data1.Bottle_QR_Codes).Split(',');

                                    while (cnt < list.Length)
                                    {
                                        <tr class="border_0 text-left">
                                            @for (int i = cnt; i < cnt + 2; i++)
                                            {
                                                <td class="border_0 pl-3" colspan="2">@((i + 1) + ". " + Convert.ToString(list[i]))</td>
                                            }

                                            @{
                                                cnt += 2;
                                                totalRow += 1;
                                            }
                                        </tr>
                                    }
                                }
                                @*
                        while (totalRow >= 0)
                        {
                        <tr class="border_0"><td colspan="4" class="border_0">&nbsp;</td></tr>
                        totalRow -= 1;
                        } *@
                            }

                        </tbody>
                    </table>
                </div>
            </div>
        }


        @if (Model.Data3 != null)
        {
            <div class="col-sm-5 col-md-4 ml-auto py-3 text-center overflow-hidden">
                <div class="mx-auto table-responsive">
                    <table class="table table-bordered table-sm w-100">
                        <tbody>
                            <tr>
                                <td>Plant Name / इकाई</td>
                                <td>@Model.Data3.PlantName</td>
                            </tr>
                            <tr>
                                <td>Invoice QR Code / चालान क्यू आर संहिता</td>
                                <td>@Model.Data3.InvoiceQrCode</td>
                            </tr>

                            <tr>
                                <td>MDA No. / एमडीए क्रमांक</td>
                                <td>@Model.Data3.Mda_No</td>
                            </tr>

                            <tr>
                                <td>Vehicle No. / वाहन क्रमांक</td>
                                <td>@Model.Data3.Truck_No</td>
                            </tr>

                            <tr>
                                <td>Dispatch Date / प्रेषण की तारीख</td>
                                <td>@Model.Data3.Gate_Out_Date</td>
                            </tr>

                            <tr>
                                <td>Party Name / पार्टी का नाम</td>
                                <td>@Model.Data3.Transporter_Name</td>
                            </tr>

                            <tr>
                                <td>Destination / स्थान</td>
                                <td>@Model.Data3.Desp_Place</td>
                            </tr>

                            <tr>
                                <td>Product Name / प्रोडक्ट का नाम</td>
                                <td>@Model.Data3.Prod_Desc</td>
                            </tr>

                            <tr>
                                <td>No of Bottle / बोतल की संख्या</td>
                                <td>@Model.Data3.NoOfBox</td>
                            </tr>

                            <tr>
                                <td>No of Shipper / शिपर की संख्या</td>
                                <td>@Model.Data3.Required_Shipper</td>
                            </tr>

                            <tr>
                                <td>No of Loaded Shipper / भारित शिपर की संख्या</td>
                                <td>@Model.Data3.Loaded_Shipper</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-sm-5 col-md-4 mr-auto py-3 text-center overflow-hidden">
                <div class="mx-auto table-responsive">
                    <table class="table table-bordered table-sm w-100">
                        <thead>
                            <tr>
                                <td colspan="5">Batch Information / बैच जानकारी</td>
                            </tr>
                            <tr>
                                <td width="5%"># / <br /> क्रमांक</td>
                                <td>Batch No. / <br /> बैच क्रमांक</td>
                                <td>Mfg. Date / <br /> निर्माण तारीख</td>
                                <td>Exp. Date / <br /> समाप्ति तारीख</td>
                                <td width="10%">Shipper Count / <br /> शिपर की संख्या</td>
                            </tr>
                        </thead>
                        <tbody>
                            @if (Model.Data3.listShipperBatch != null && ((List<ShipperBatch>)Model.Data3.listShipperBatch).Count() > 0)
                            {
                                var i = 1;

                                foreach (var item in ((List<ShipperBatch>)Model.Data3.listShipperBatch).GroupBy(x => new { x.Batch_no, x.mfg_dt, x.expiry_dt })
                                .Select(x => new { Batch_No = x.Key.Batch_no, MFG_Date = x.Key.mfg_dt, Expiry_Date = x.Key.expiry_dt, Count = x.Count() })
                                .OrderBy(x => x.Batch_No).ToList())
                                {
                                    <tr>
                                        <td>@(i++)</td>
                                        <td>@item.Batch_No</td>
                                        <td>@item.MFG_Date</td>
                                        <td>@item.Expiry_Date</td>
                                        <td class="text-center">@item.Count</td>
                                    </tr>
                                }
                            }
                            else
                            {
                                <tr>
                                    <td colspan="5">No any records found.</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }
    </div>

    <footer class="footer p-0 m-0">
        <div class="row overflow-hidden text-center">
            <div class="col-12 mx-auto">
                <strong>© Copyright @DateTime.Now.Year <a href="https://www.iffco.in/en/corporate">IFFCO</a>.</strong> &nbsp; All rights reserved. &nbsp;
                <div class="float-right"> <b>Version</b> 2.0.0 </div>
            </div>
        </div>
    </footer>

</body>
</html>
